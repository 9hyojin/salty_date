<!DOCTYPE html>
<html lang="en-US" xmlns:th="http://www.thymeleaf.org" xmlns:layout=http://www.ultraq.net.nz/thymeleaf/layout layout:decorate="~{layouts/layout1}">


<div layout:fragment="content">

    <h4> 세션 모니터링 </h4>

    <table class="table">
        <tr>
            <th> user </th>
            <th> sessionId </th>
            <th> lastTime </th>
            <th> 종료 </th>
        </tr>

        <th:block th:each="member:${sessionList}">
            <th:block th:each="sessionInfo, i:${member.sessions}" th:object="${sessionInfo}">
                <tr>
                    <td th:if="${i.index==0}" th:rowspan="${member.count}" th:text="${member.name}">name</td>
                    <td th:text="*{sessionId}">sessionId</td>
                    <td th:text="*{#dates.format(time, 'yyyy-mm-dd HH:mm:ss')}"></td>
                    <td>
                        <form th:action="@{/session/expire}" method="post">
                            <input type="hidden" name="sessionId" th:value="*{sessionId}"/>
                            <button type="submit"> 강제종료 </button>
                        </form>
                    </td>
                </tr>
            </th:block>
        </th:block>

    </table>
</div>
</html>